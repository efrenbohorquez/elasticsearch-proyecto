services:
  # Worker service para ejecutar tareas programadas
  - type: worker
    name: elasticsearch-proyecto-worker
    runtime: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python main.py
    envVars:
      - key: ELASTIC_CLOUD_ID
        sync: false
      - key: ELASTIC_API_KEY
        sync: false
      - key: ELASTIC_USER
        value: elastic
      - key: ELASTIC_PASSWORD
        sync: false
      - key: INDEX_NAME
        value: index_cuentos
      - key: LOG_LEVEL
        value: INFO
      - key: REQUEST_TIMEOUT
        value: 30
      - key: MAX_RETRIES
        value: 3
      - key: PYTHON_VERSION
        value: 3.11.9

  # Web service opcional para API REST (descomentar si es necesario)
  # - type: web
  #   name: elasticsearch-proyecto-api
  #   runtime: python
  #   plan: free
  #   buildCommand: pip install -r requirements.txt
  #   startCommand: gunicorn app:app
  #   envVars:
  #     - key: ELASTIC_CLOUD_ID
  #       sync: false
  #     - key: ELASTIC_API_KEY
  #       sync: false
